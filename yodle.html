<!DOCTYPE html>
<html>
  <title>
  </title>
</head>
<body>
  <input type="file" id="open">
  </input>
  <pre id="content">
  </pre>
  <div id="seq">
  </div>
  <div id="max">
  </div>
  <script type="text/javascript">

  var arry = [];
    document.getElementById("open").addEventListener('change', function(){
      var read = new FileReader();
      read.onload = function() {

        var str = "" + this.result;
        //remove the new lines first incase they are read as white spaces
        str = str.replace(/(?:\r\n|\r|\n)/g, '.');
        //remove the remaining white spaces
        str = str.replace(/(?:\s)/g, ',');
        //console.log(str);
        //build the array now


        var arry = [];
        var x = 0;
        var holder = 0;
        var num = 0;
        //arry[y] = [];
        var strHold = "";

        while (num < str.length){
          var char = str.charAt(num);
          if(char === ","){
            //if char === empty space just keep moving
            //but dont forget to have the arry location = strHold
            //reset strHold
            arry[x] = parseInt(strHold);
            //console.log("test" + strHold);
            x++;
            strHold = "";
          } else if (char === "."){
            //ah a new line
            //for this we have to increase y
            //but reset x
            arry[x] = "br";
            x++;
          } else {
            //finally the hard part
            //here we just keep grabing the current char till we hit a . or ,
            strHold += char;
            //console.log("test " + strHold);
          }
          num++;
        }
        console.log(arry);
        max(arry);
        seq(arry);
      }
      read.readAsText(this.files[0]);
    })
    function max(arry){
      //finding the largest possible outcome
      var total = 0;
      var num = 0;
      var hold = 0;

      while(num < arry.length){
        if(arry[num] > hold){
          hold = arry[num];
        } else if (arry[num] === "br"){
          total += hold;
        }
        num++;
      }


      document.getElementById('max').innerHTML = "maximum total = " + total;
    }
    function seq(arry){
      //finding the largest possible outcome while doing it seequintially
      var total = 0;
      var num = 0;
      var x = 0;
      var xHold = 0;
      var counter = 0;
      var linecounter = 0;

      while(num < arry.length){
        //console.log("x " + x + " xHold " + xHold);
        //console.log("total = " + total);
        if(arry[num] === "br"){
          x = 0;
          console.log("line counter = " + linecounter);
          linecounter++;
        } else if(x === xHold){
          //console.log("x = xHold");
          if(arry[num] < arry[num + 1]){
            //console.log("num + 1 is the larger one");
            console.log("x = " + arry[num] + " x + 1 " + arry[num + 1]);
            xHold++;
            x = null;
            total += arry[num + 1];
            console.log("the count is " + counter);
            counter++;
          } else {
            //console.log("x? " + arry[num]);
            x = null;
            total += arry[num];
            console.log("the count is " + counter);
            counter++;
          }
        } else {
          if (x !== null){
            x++;  
          }
        }
        num++;
      }


      document.getElementById('seq').innerHTML = "sequential total = " + total;
    }
  </script>
</body>
</html>
