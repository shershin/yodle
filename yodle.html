<!DOCTYPE html>
<html>
  <title>
  </title>
</head>
<body>
  <input type="file" id="open">
  </input>
  <pre id="content">
  </pre>
  <div id="adj">
  </div>
  <div id="max">
  </div>
  <script type="text/javascript">

  var arry = [];
    document.getElementById("open").addEventListener('change', function(){
      var read = new FileReader();
      read.onload = function() {

        var str = "" + this.result;
        //remove the new lines first incase they are read as white spaces
        str = str.replace(/(?:\r\n|\r|\n)/g, '.');
        //remove the remaining white spaces
        str = str.replace(/(?:\s)/g, ',');
        //console.log(str);
        //build the array now


        var arry = [];
        var x = 0;
        var holder = 0;
        var num = 0;
        //arry[y] = [];
        var strHold = "";

        while (num < str.length){
          var char = str.charAt(num);
          if(char === ","){
            //if char === empty space just keep moving
            //but dont forget to have the arry location = strHold
            //reset strHold
            arry[x] = parseInt(strHold);
            //console.log("test" + strHold);
            x++;
            strHold = "";
          } else if (char === "."){
            //ah a new line
            //for this we have to increase y
            //but reset x
            arry[x] = "br";
            x++;
          } else {
            //finally the hard part
            //here we just keep grabing the current char till we hit a . or ,
            strHold += char;
            //console.log("test " + strHold);
          }
          num++;
        }
        console.log(arry);
        max(arry);
        adj(arry);
      }
      read.readAsText(this.files[0]);
    })
    function max(arry){
      //finding the largest possible outcome
      var total = 0;
      var num = 0;
      var hold = 0;

      while(num < arry.length){
        if(arry[num] > hold){
          hold = arry[num];
        } else if (arry[num] === "br"){
          total += hold;
        }
        num++;
      }


      document.getElementById('max').innerHTML = "maximum total = " + total;
    }
    function adj(arry){
      //finding the largest possible outcome while doing it seequintially
      var total = 0;
      var num = 0;
      var x = 0;
      var xHold = 0;

      while(num < arry.length){
        if(arry[num] === "br"){
          x = 0;
        } else if(x === xHold){
          console.log("checking " + arry[num - 1] + " ??? " + arry[num] + " ??? " + arry[num + 1]);
          if(arry[num] < arry[num + 1]){
            // + 1
            if (arry[num - 1] < arry[num + 1]){
              xHold++;
              x = null;
              total += arry[num + 1];
              console.log("added " + arry[num + 1]);
            } else if (arry[num] < arry[num - 1]){
              xHold--;
              x = null;
              total += arry[num - 1];
              console.log("added " + arry[num - 1]);
            } else {
              x = null;
              total += arry[num];
              console.log("added " + arry[num]);
            }
          } else if (arry[num] < arry[num - 1]){
            // - 1
            if(arry[num + 1] < arry[num - 1]){
              xHold--;
              x = null;
              total += arry[num - 1];
              console.log("added " + arry[num - 1]);
            } else if (arry[num] < arry[num + 1]){
              xHold++;
              x = null;
              total += arry[num + 1];
              console.log("added " + arry[num + 1]);
            } else {
              x = null;
              total += arry[num];
              console.log("added " + arry[num]);
            }
          } else {
            x = null;
            total += arry[num];
            console.log("added " + arry[num]);
          }
        } else {
          if (x !== null){
            x++;
          }
        }
        num++;
      }


      document.getElementById('adj').innerHTML = "adjuential total = " + total;
    }
  </script>
</body>
</html>
